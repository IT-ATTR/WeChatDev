# 微信开发流程（api.php中进行开发）

>在微信开发中，主要用于接收用户的各种关键字进行相应的逻辑处理，比如：签到、抽奖、机器人聊天、自动回复、听歌等功能，都将在此篇中进行体验出来

>首先微信客户端接收用户发送的信息调用微信接口，然后再通过你自己在公众平台上的配置，访问你自己的服务器中的相应的接口，然后将自己写好的分钟逻辑方法，返回到微信客户端，呈现在用户面前，就是微信公众号的工作流程了

### 微信的六大接收接口（xml格式或者json格式）
>文本消息接收接口($this->keyword)
>图片接收接口
>视频和小视频接收接口
>语音接收接口
>地理位置接收接口
>链接接口接收接口(很少用)

#### 通过$this->sendType判断用户上传的类型

>在微信中开发添加exit()是一个特别好的习惯

```php
<?php
error_reporting(E_ALL || ~E_NOTICE);
define("TOKEN", "");
include dirname(__FILE__)."/Lib/WeChatApi.class.php";
include dirname(__FILE__)."/Lib/WeChat.class.php";
class WxApi extends Wechat{

	public function responseMsg(){
		parent::responseMsg();

		if( $this->sendType == "text" ){
			$this -> reText("您上传的是文本消息，我接收的类型是"+$this->sendType);
			exit();
		}else if( $this->sendType == "image" ){
			$this -> reText("您上传的是图片消息，我接收的类型是"+$this->sendType);
			exit();
		}else if( $this->sendType == "video" ){
			$this -> reText("您上传的是视频(小视频)消息，我接收的类型是"+$this->sendType);
			exit();
		}else if( $this->sendType == "voice" ){
			$this -> reText("您上传的是语音消息，我接收的类型是"+$this->sendType);
			exit();
		}else if( $this->sendType == "link" ){
			$this -> reText("您上传的是链接消息，我接收的类型是"+$this->sendType);
			exit();
		}else if( $this->sendType == "location" ){
			$this -> reText("您上传的是地理位置消息，我接收的类型是"+$this->sendType);
			exit();
		}
	}

}

$WxApi = new WxApi();
#注解该代码就开启了自动回复功能
// $WxApi ->valid();
$WxApi -> responseMsg();
```

### 微信回复接口
#### 文本回复接口($this->keyword)

>案例一：输入？,获取相应的内容
```php
<?php
error_reporting(E_ALL || ~E_NOTICE);
define("TOKEN", "");
include dirname(__FILE__)."/Lib/WeChatApi.class.php";
include dirname(__FILE__)."/Lib/WeChat.class.php";
class WxApi extends Wechat{

	public function responseMsg(){
		parent::responseMsg();

		if( $this-> keyword =="?" ){
			$content = "【1】火警电话\n【2】防火电话\n【3】报警电话\n【4】我的电话\n";
			$this->reText( $content );
			exit();
		}else if($this-> keyword =="1"){
			$this->reText( "火警电话：119" );
			exit();
		}else if($this-> keyword =="2"){
			$this->reText( "防火电话：111" );
			exit();
		}else if($this-> keyword =="3"){
			$this->reText( "报警电话：110" );
			exit();
		}else if($this-> keyword =="4"){
			$this->reText( "我的电话：112" );
			exit();
		}
	}

}

$WxApi = new WxApi();
#注解该代码就开启了自动回复功能
// $WxApi ->valid();
$WxApi -> responseMsg();
```
>在微信开发中，换行要使用\n,不能使用常见的换行标签


